#:import MapView kivy.garden.mapview.MapView
#:include loginscreen.kv
#:include loginsreenup.kv

<ScreenManager>:
    LoginScreen:
    LoginScreen1:
    MainScreen:
    SettingsScreen:
    Mapsi:
<Toolbar@BoxLayout>:
    size_hint_y: None
    height: '48dp'
    padding: '4dp'
    spacing: '4dp'

    canvas:
        Color:
            rgba: .2, .2, .2, .6
        Rectangle:
            pos: self.pos
            size: self.size
<MainScreen>:
    name: "main"
    FloatLayout:
        Button:
            text: "КАРТА"
            size_hint: .25, 0.10
            pos_hint: {'x':.70, 'y':.25}
            on_release: app.root.current = "Mapsi1"
        Button:
            text: "Настройки"
            size_hint: .25, 0.10
            pos_hint: {'x':.70, 'y': .13}
            on_release: app.root.current = "settings"








<Mapsi>:
    name: "Mapsi1"
    RelativeLayout:
        MapView:

            id: mapview
            lat: 55.34321886123324
            lon: 86.06356764514878
            zoom: 15
            #size_hint: .5, .5
            #pos_hint: {"x": .25, "y": .25}

            #on_map_relocated: mapview2.sync_to(self)
            #on_map_relocated: mapview3.sync_to(self)

            MapMarkerPopup:
                lat: 55.375711
                lon: 86.071539
                source: "Infocard/mapMarker.png"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width + 300, self.height + 300
                            pos: self.x - 150, self.y - 40
                            source: "Infocard/MuzeyKrasniyGorka.png"
            MapMarkerPopup:
                lat: 55.37458689218019
                lon: 86.07826716927184
                source: "Infocard/mapMarker.png"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width + 300, self.height + 300
                            pos: self.x - 150, self.y - 40
                            source: "Infocard/PamytnicShahery.png"
            MapMarkerPopup:
                lat: 55.36092555961332
                lon: 86.07843404247674
                source: "Infocard/mapMarker.png"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width + 300, self.height + 300
                            pos: self.x - 150, self.y - 40
                            source: "Infocard/ParkChudes.png"
            MapMarkerPopup:
                lat: 55.35472849084462
                lon: 86.0884753600993
                source: "Infocard/mapMarker.png"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width + 300, self.height + 300
                            pos: self.x - 150, self.y - 40
                            source: "Infocard/PloshadSovetov.png"
            MapMarkerPopup:
                lat: 55.34479595208266
                lon: 86.08932494140986
                source: "Infocard/mapMarker.png"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width + 300, self.height + 300
                            pos: self.x - 150, self.y - 40
                            source: "Infocard/ParkPobedi.png"


        Toolbar:
            top: root.top
            Button:
                text: "Назад"
                on_release: app.root.current = "main"
            Button:
                text: "Мувай в Калугу"
                on_release: mapview.center_on(54.511785, 36.265093)
            Spinner:
                values: 'Музей <<Красная Горка>>', 'Памятник Погибшим Шахтерам', 'Парк Чудес', 'Площадь Советов', 'Парк Победы'
                on_text:
                    if self.text == "Музей <<Красная Горка>>":  mapview.center_on(55.375711, 86.071539)
                    elif self.text == "Памятник Погибшим Шахтерам": mapview.center_on(55.37458686095922, 86.07869197494216)
                    elif self.text == "Парк Чудес": mapview.center_on(55.361071919148706, 86.07845550832407)
                    elif self.text == "Площадь Советов":    mapview.center_on(55.35471632364373, 86.08853412654248)
                    elif self.text == "Парк Победы":    mapview.center_on(55.34479595208266, 86.08932494140986)






    Toolbar:
        Label:
            text: "Longitude: {}".format(mapview.lon)
        Label:
            text: "Latitude: {}".format(mapview.lat)




<SettingsScreen>:
    name: "settings"
    BoxLayout:
        orientation: "vertical"
        Accordion:
            orientation: "vertical"

            AccordionItem:
                title: "Профиль"
                size_hint:.9, 0.10
                pos_hint: {'x':0.05, 'y':0.85}

                Label:
                    font_name: 'Vetka.ttf'
                    font_size: 30
                    color:0,0,0,1
                    text: "DemoUser"
                TextInput:
                    id: firstName
                    font_name: 'Vetka.ttf'
                    text: "Гы"
                Image:
                    canvas:
                        Color:
                            rgb: (1, 1, 1)
                        Rectangle:
                            texture: self.texture
                            size: self.width-100 , self.height-250
                            pos: self.x - 320, self.y + 250
                            source: "Infocard/user.png"

            AccordionItem:
                title: "Интересы"
                size_hint: .9, 0.10
                pos_hint: {'x':0.05, 'y':0.70}
        Button:
            size_hint: .25, 0.10
            text: "Назад"
            on_release: app.root.current = "main"